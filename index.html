<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia at 2015-02-19
 | Rendered using Apache Maven Fluido Skin 1.3.0
-->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="Date-Revision-yyyymmdd" content="20150219" />
    <meta http-equiv="Content-Language" content="en" />
    <title>Wildfly Extension Plugin - </title>
    <link rel="stylesheet" href="./css/apache-maven-fluido-1.3.0.min.css" />
    <link rel="stylesheet" href="./css/site.css" />
    <link rel="stylesheet" href="./css/print.css" media="print" />

      
    <script type="text/javascript" src="./js/apache-maven-fluido-1.3.0.min.js"></script>

    
            </head>
        <body class="topBarDisabled">
          
                
                    
    
        <div class="container-fluid">
          <div id="banner">
        <div class="pull-left">
                                <div id="bannerLeft">
                <h2>Wildfly Extension Installer Maven Plugin</h2>
                </div>
                      </div>
        <div class="pull-right">  </div>
        <div class="clear"><hr/></div>
      </div>

      <div id="breadcrumbs">
        <ul class="breadcrumb">
                
                    
                  <li id="publishDate">Last Published: 2015-02-19</li>
                  <li class="divider">|</li> <li id="projectVersion">Version: 0.5.0</li>
                      
                
                    
      
                            </ul>
      </div>

                  
      <div class="row-fluid">
        <div id="leftColumn" class="span2">
          <div class="well sidebar-nav">
                
                    
                <ul class="nav nav-list">
                    <li class="nav-header">Overview</li>
                                
      <li class="active">
    
            <a href="#"><i class="none"></i>Introduction</a>
          </li>
                  
      <li>
    
                          <a href="plugin-info.html" title="Goals">
          <i class="none"></i>
        Goals</a>
            </li>
                              <li class="nav-header">Project Documentation</li>
                                                                                                    
      <li>
    
                          <a href="project-info.html" title="Project Information">
          <i class="icon-chevron-right"></i>
        Project Information</a>
                  </li>
                                                                                                                                            
      <li>
    
                          <a href="project-reports.html" title="Project Reports">
          <i class="icon-chevron-right"></i>
        Project Reports</a>
                  </li>
            </ul>
                
                    
                
          <hr class="divider" />

           <div id="poweredBy">
                            <div class="clear"></div>
                            <div class="clear"></div>
                            <div class="clear"></div>
                             <a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy">
        <img class="builtBy" alt="Built by Maven" src="./images/logos/maven-feather.png" />
      </a>
                  </div>
          </div>
        </div>
        
                        
        <div id="bodyColumn"  class="span10" >
                                  
            <div class="section">
<h2>Wildfly Extension plugin<a name="Wildfly_Extension_plugin"></a></h2>
<p>Wildfly Extension plugin allows you to install your JBoss Module as an extension with subsystem configuration to WildFly server. This is useful when writing or testing a JBoss subsystem. This plugin takes as input a <b>moduleZip</b> file, that you need to build on your own.</p></div>
<div class="section">
<h2>Features<a name="Features"></a></h2>
<ul>
<li>Install JBoss module as extension to standalone or domain profiles</li>
<li>Setup subsystem configuration</li>
<li>Setup socket binding</li>
<li>Edit or replace almost any piece of standalone.xml - this allows to modify other subsystems configurations to ie setup datasources, caches etc.</li></ul></div>
<div class="section">
<h2>Usage<a name="Usage"></a></h2>
<p>Plugin is currently only available in <a class="externalLink" href="https://repository.jboss.org/nexus/content/repositories/releases">JBoss Releases repo</a>, to be able to use it in your project, you need to add following into your pom.xml:</p>
<div class="source">
<pre>    &lt;pluginRepositories&gt;
        ...
        &lt;pluginRepository&gt;
            &lt;id&gt;jboss-releases&lt;/id&gt;
            &lt;name&gt;jboss-releases&lt;/name&gt;
            &lt;url&gt;https://repository.jboss.org/nexus/content/repositories/releases/&lt;/url&gt;
        &lt;/pluginRepository&gt;
        ...
    &lt;/pluginRepositories&gt;</pre></div></div>
<div class="section">
<h2>Requirements<a name="Requirements"></a></h2>
<ul>
<li>You need your JBoss module ZIP file ready from previous step of your build. This can be done for example using <a class="externalLink" href="http://maven.apache.org/plugins/maven-assembly-plugin/">assemblly plugin</a>. The module is layed down just by unzipping into <b>jbossHome</b> directory. This is the default, because your module can contain for example additional server configuration profiles. In case directory structure in module does not have server home as it's root, you can set <b>modulesHome</b> configuration option to lay down your module to specified location (i.e <i>modules/system/layers/base</i> in WildFly)</li></ul></div>
<div class="section">
<h2>Examples<a name="Examples"></a></h2>
<div class="section">
<h3>Install to standalone profile<a name="Install_to_standalone_profile"></a></h3>
<p>Example configuration to install JBoss module to <b>standalone-full.xml</b> server profile</p>
<div class="source">
<pre>    &lt;profiles&gt;
        ...
        &lt;profile&gt;
            &lt;id&gt;install2wf&lt;/id&gt;
            &lt;build&gt;
                &lt;plugins&gt;
                    &lt;plugin&gt;
                         &lt;groupId&gt;org.wildfly.plugins&lt;/groupId&gt;
                         &lt;artifactId&gt;wildfly-extension-maven-plugin&lt;/artifactId&gt;
                         &lt;version&gt;0.5.0&lt;/version&gt;
                         &lt;configuration&gt;
                             &lt;moduleZip&gt;${project.build.directory}/module.zip&lt;/moduleZip&gt;
                             &lt;jbossHome&gt;/jboss/wildfly-8.1.0.Final&lt;/jbossHome&gt;
                             &lt;serverConfig&gt;standalone/configuration/standalone-full.xml&lt;/serverConfig&gt;
                             &lt;subsystem&gt;${basedir}/src/main/resources/standalone-subsystem.xml&lt;/subsystem&gt;
                         &lt;/configuration&gt;
                         &lt;executions&gt;
                             &lt;execution&gt;
                                 &lt;id&gt;build-dist&lt;/id&gt;
                                 &lt;phase&gt;install&lt;/phase&gt;
                                 &lt;goals&gt;
                                    &lt;goal&gt;deploy&lt;/goal&gt;
                                 &lt;/goals&gt;
                            &lt;/execution&gt;
                         &lt;/executions&gt;
                    &lt;/plugin&gt;
                &lt;/plugins&gt;
            &lt;/build&gt;
        &lt;/profile&gt;
        ...
    &lt;/profiles&gt;</pre></div></div>
<div class="section">
<h3>Advanced edit operations on standalone.xml<a name="Advanced_edit_operations_on_standalone.xml"></a></h3>
<p>Example configuration to install JBoss module to <b>standalone.xml</b> and set's up new <i>socket-binding</i> and datasource</p>
<div class="source">
<pre>    &lt;profiles&gt;
        ...
        &lt;profile&gt;
            &lt;id&gt;install2wf&lt;/id&gt;
            &lt;build&gt;
                &lt;plugins&gt;
                    &lt;plugin&gt;
                         &lt;groupId&gt;org.wildfly.plugins&lt;/groupId&gt;
                         &lt;artifactId&gt;wildfly-extension-maven-plugin&lt;/artifactId&gt;
                         &lt;version&gt;0.5.0&lt;/version&gt;
                         &lt;configuration&gt;
                             &lt;moduleZip&gt;${project.build.directory}/module.zip&lt;/moduleZip&gt;
                             &lt;jbossHome&gt;/jboss/wildfly-8.1.0.Final&lt;/jbossHome&gt;
                             &lt;serverConfig&gt;standalone/configuration/standalone.xml&lt;/serverConfig&gt;
                             &lt;subsystem&gt;${basedir}/src/main/resources/subsystem.xml&lt;/subsystem&gt;
                             &lt;edit&gt;
                                 &lt;insert&gt;
                                     &lt;select&gt;/server/socket-binding-group[@name='standard-sockets']&lt;/select&gt;
                                     &lt;xml&gt;&lt;[CDATA[&lt;socket-binding name=&quot;name&quot; port=&quot;12345&quot;]]&gt;&lt;/xml&gt;
                                     &lt;attribute&gt;name&lt;/attribute&gt;
                                 &lt;/insert&gt;
                                 &lt;insert&gt;
                                     &lt;select&gt;/server/*[namespace-uri()='urn:jboss:domain:datasources:2.0']/*[@local-name()='datasources']&lt;/select&gt;
                                     &lt;content&gt;src/main/resources/datasource.xml&lt;/content&gt;
                                     &lt;attribute&gt;jndi-name&lt;/attribute&gt;
                                 &lt;/insert&gt;
                              &lt;/edit&gt;
                         &lt;/configuration&gt;
                         &lt;executions&gt;
                             &lt;execution&gt;
                                 &lt;id&gt;build-dist&lt;/id&gt;
                                 &lt;phase&gt;install&lt;/phase&gt;
                                 &lt;goals&gt;
                                    &lt;goal&gt;deploy&lt;/goal&gt;
                                 &lt;/goals&gt;
                            &lt;/execution&gt;
                         &lt;/executions&gt;
                    &lt;/plugin&gt;
                &lt;/plugins&gt;
            &lt;/build&gt;
        &lt;/profile&gt;
        ....
    &lt;/profiles&gt;</pre></div>
<p>Above example shows how to embed XML content into <i>xml</i> element (first <i>insert</i>). Also note <i>attribute</i> element. By specifying it you can make sure your content (in our case socket-binding) get's replaced when we run plugin over and over and at some point you decide to change the port. By default, plugin is able to ensure content identity by taking all attributes and it's values from the root of inserted content - without <i>attribute</i> 2nd socket-binding would be produced. Second <i>insert</i> puts datasource from separate file. Note that given <i>select</i> must workaround XML namespaces. Again <i>jndi-name</i> attribute is being used to identify our datasource, in this case though it's jndi-name is root attribute in <i>src/main/resources/datasource.xml</i> file. Also note that <i>subsystem</i> element is only a shortcut to <i>insert</i> putting content to the right place. </p>
<p>For more info about plugin configuration see <a href="./deploy-mojo.html">wildfly-extension:deploy</a> goal.</p></div></div>
                  </div>
            </div>
          </div>

    <hr/>

    <footer>
            <div class="container-fluid">
              <div class="row span12">Copyright &copy;                    2015
                        <a href="http://www.redhat.com/">Red Hat, Inc.</a>.
            All Rights Reserved.      
                    
      </div>

        
        
                </div>
    </footer>
  </body>
</html>
